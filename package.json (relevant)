{
  "name": "punjabiquest",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.1.0",
    "next": "14.1.0",
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "tailwindcss": "^3.3.0",
    "lucide-react": "^0.258.0",
    "openpgp": "^6.3.0",
    "zustand": "^4.4.0"
  },
  "devDependencies": {
    "typescript": "^5.2.0",
    "postcss": "^8.4.0",
    "autoprefixer": "^10.4.0"
  }
}
// dependencies (Ausschnitt)
"dependencies": {
  // ...bestehende deps
  "chart.js": "^4.4.0",
  "react-chartjs-2": "^5.2.0"
}
+-
return NextResponse.json({ dau: dauByDay, xp: xpRes?.data ?? [], topUsers: top ?? [], cohorts: cohorts ?? [], streaks: streaks ?? [] });
  } catch (e:any) {
    return NextResponse.json({ error: e.message ?? String(e) }, { status: 500 });
export async function GET() {
  const supabase = createServerSupabase();
  try {
    const { data } = await supabase.from('analytics_weekly_cohort').select('*').order('cohort_week', {ascending:false}).limit(200);
    return NextResponse.json({ cohorts: data });
  } catch (e:any) {
    return NextResponse.json({ error: e.message ?? String(e) }, { status: 500 });
  }
+
export async function GET() {
  const supabase = createServerSupabase();
  try {
    const { data } = await supabase.from('events').select('user_id, created_at');
    // compute unique users per day
    const map: Record<string, Set<string>> = {};
    (data||[]).forEach((r:any) => {
      const day = r.created_at.slice(0,10);
      map[day] = map[day] ?? new Set();
      map[day].add(r.user_id);
    });
    const arr = Object.keys(map).sort().map(d => ({ day: d, dau: map[d].size }));
    return NextResponse.json({ dau: arr });
  } catch (e:any) {
    return NextResponse.json({ error: e.message ?? String(e) }, { status: 500 });
  }